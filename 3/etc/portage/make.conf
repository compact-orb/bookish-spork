# default/linux/arm64/23.0/systemd

CC="clang"
CPP="clang-cpp"
CXX="clang++"
AR="llvm-ar"
NM="llvm-nm"
RANLIB="llvm-ranlib"
LD="ld.lld"
OBJCOPY="llvm-objcopy"
STRIP="llvm-strip"
OBJDUMP="llvm-objdump"
READELF="llvm-readelf"

CFLAGS="-O3 -ffp-contract=fast -fno-semantic-interposition -flto=thin -mcpu=neoverse-n1 -pipe"
CXXFLAGS="${CFLAGS}"

FFLAGS="-O3 -fno-semantic-interposition -fno-trapping-math -flto -mcpu=neoverse-n1 -pipe"
FCFLAGS="${FFLAGS}"

ORIGINAL_LDFLAGS="${LDFLAGS}"

LDFLAGS="${ORIGINAL_LDFLAGS} ${CFLAGS} -Wl,--undefined-version -fuse-ld=lld"

RUSTFLAGS="--codegen linker-plugin-lto --codegen target-cpu=neoverse-n1"

CGO_CFLAGS="${CFLAGS}"
CGO_CXXFLAGS="${CXXFLAGS}"
CGO_FFLAGS="${FFLAGS}"
CGO_LDFLAGS="${LDFLAGS}"

LLVM="1"
KCFLAGS="-O3 -ffp-contract=fast -fno-semantic-interposition -mcpu=neoverse-n1 -pipe"

USE="clang default-lld lto profile orc pgo dist-kernel ktls jemalloc tcmalloc tpm secureboot modules-sign"

ACCEPT_LICENSE="*"

EMERGE_DEFAULT_OPTS="--getbinpkgonly --jobs=2 --quiet-build --with-bdeps=n"

FEATURES="-ebuild-locks -merge-wait parallel-fetch parallel-install binpkg-request-signature"

GENTOO_MIRRORS="http://distfiles.gentoo.org"

LC_MESSAGES=C.utf8

# Secure Boot signing keys (injected at build time)
SECUREBOOT_SIGN_KEY="/root/secureboot/db.key"
SECUREBOOT_SIGN_CERT="/root/secureboot/db.pem"
MODULES_SIGN_KEY="/root/secureboot/db.key"
MODULES_SIGN_CERT="/root/secureboot/db.pem"
